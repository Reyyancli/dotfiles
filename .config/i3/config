include ~/.config/i3/workspaces
include ~/.config/i3/unused
include ~/.config/i3/commands
include ~/.config/i3/swap
#include ~/.config/i3/kdei3config
include ~/.config/i3/mystuff
focus_follows_mouse no

# Things to always execute
exec_always --no-startup-id xset r rate 300 50
exec_always --no-startup-id dunst
exec_always export XDG_MENU_PREFIX=arch- && kbuildsycoca6 --noincremental
exec_always --no-startup-id copyq
exec_always nitrogen --restore
exec_always playerctld daemon
exec_always /usr/lib/polkit-kde-authentication-agent-1
exec_always nm-applet
exec obs --startreplaybuffer --minimize-to-tray --disable-shutdown-check

# Sets variables
set $mod Mod4
set $lock i3lock --bar-indicator -B 5 --bar-direction=2 --bar-pos 500 --bar-count 200 --bar-max-height 50 --bar-periodic-step 25 --bar-color EACD4C -k --keyhl-color=F9F5BB --time-font "Cute Cat" --time-pos="70:510" --bar-base-width 40 --date-color=F9F5BB --date-font "Cute Cat" --date-align 1 --time-align 1 --greeter-text="System Locked" --greeter-font "Cute Cat" --greeter-color=F9F5BB --greeter-pos="920:460" --ringver-color=F9F5BB -p default -e --verif-font "Cute Cat" --wrong-font "Cute Cat" --ind-pos="920:510" --wrong-color=F9F5BB
bindsym $Mod+F12 exec xtrlock

# Pavucontrol for managing audio
bindsym $Mod+0 exec pavucontrol

# Floating windows
for_window [class="explorer.exe"] floating enable
for_window [class="copyq"] floating enable
for_window [class="pavucontrol"] floating enable
for_window [class="Notepadqq"] floating enable
for_window [class="OpenTabletDriver.UX"] floating enable
for_window [class="Nitrogen"] floating enable
for_window [class="Blueman-manager"] floating enable
for_window [class="PureRef"] floating enable
for_window [class="Thunar"] floating enable
for_window [class="Mousepad"] floating enable
for_window [class="Deadbeef"] floating enable
for_window [class="gwenview"] floating enable
for_window [class="dolphin"] floating enable
for_window [class="Free Download Manager"] floating enable

# Picom
bindsym $Mod+F11 exec picom
bindsym $Mod+Shift+F11 exec picom --no-vsync
bindsym $Mod+Mod1+F11 exec killall picom

# Flameshot And spectacle for screenshots
#exec --no-startup-id flameshot
bindsym Print exec --no-startup-id flameshot gui

for_window [class="spectacle"] floating enable
bindsym Shift+Print exec spectacle --activewindow

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:monospace 0

# Polybar
exec --no-startup-id $HOME/.config/polybar/launch.sh
bindsym $mod+m exec killall polybar
bindsym $mod+Mod1+m exec $HOME/.config/polybar/launch.sh

# Stuff
exec --no-startup-id dex --autostart --environment i3
exec --no-startup-id xss-lock --transfer-sleep-lock -- $lock
exec --no-startup-id nm-applet

# Use pactl to adjust volume in PulseAudio.
exec_always --no-startup-id pactl set-source-volume @DEFAULT_SOURCE@ 70%
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5%
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5%
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle 
#bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle
bindsym Ctrl+XF86AudioMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle

# Media player controls
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioPause exec playerctl play-pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous
bindsym Shift+XF86AudioNext exec playerctld shift
bindsym Shift+XF86AudioPrev exec playerctld unshift

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod 

# start a terminal
bindsym $mod+Return exec i3-sensible-terminal

# start dmenu (a program launcher)
bindsym $mod+Shift+d exec --no-startup-id dmenu_run
bindsym $mod+d exec --no-startup-id i3-dmenu-desktop

# Dmenu script for logout
bindsym $mod+BackSpace exec $HOME/.config/i3/scripts/logoutmenu.sh

# force and normal kill
bindsym $mod+shift+q exec $HOME/.config/i3/scripts/killscript
bindsym $mod+q kill

# Launches apps
bindsym $mod+comma exec nitrogen --head=2
bindsym $mod+Mod1+comma exec nitrogen --head=1
bindsym $mod+Mod1+period exec gnome-characters
bindsym $mod+period exec .config/i3/rofi-emoji


# Border
default_border pixel 4
default_floating_border pixel 5

# Gaps
gaps inner 10
gaps outer 4

bindsym $mod+Ctrl+u border pixel 6
bindsym $mod+Ctrl+p border pixel 4 

# Scratchpad
bindsym $mod+Shift+S move scratchpad
bindsym $mod+Mod1+S [class=.*] scratchpad show

# Border
# Class 	border	background	text	indicator	child_border
client.focused	#EACD4C	#EACD4C		#F9F5BB	#F9F5BB		#EACD4C

# Script for powercontrol
bindsym $mod+slash exec $HOME/.config/i3/scripts/powercontrol.sh

# Lock
bindsym $mod+Mod1+l exec --no-startup-id $lock 

# Bind for making floating window sticky
bindsym $mod+equal sticky toggle

# Script for changing color scheme
bindsym $mod+Ctrl+comma exec $HOME/.config/i3/scripts/theme

# Turn screen off
bindsym $mod+F1 exec "sh -c 'sleep 1;xset dpms force off'"

# dunst history pop
bindsym $mod+Mod1+h exec dunstctl history-pop
bindsym $mod+Ctrl+h exec "terminator -e 'dunstctl history;read -n 1 -s -r' & sleep 0.5; i3-msg floating enable"

# Function key buttons
bindsym XF86Calculator exec gnome-calculator
